## 实验8

> 1. 将第8课讲稿中的例子代码编写、编译、调试、运行；

> 2. “fork.c”程序中，调用semget函数创建信号量集时，把信号量集的读写权限设置为0666，如果设置为0600会有什么影响？请修改代码，验证后说明；

> 3. 为什么“fork.c”程序中main函数的子进程先退出？请分析main函数的具体执行过程。

> 4. 编写生产者和消费者程序，要求：
>
> ```
> 1)生产者和消费者两个程序，共用一个仓库，仓库是一个普通文件（/tmp/store），容量为100个字节；
> 2)生产者生产资源放进仓库，消费者则从仓库中消费资源；资源为数字字符“1、2、3、4、5、6、7、8、9、0”，一个资源就是一个数字，10个数字循环生成；
> 3)生产者创建仓库（/tmp/store），间隔1s生产一个资源，当仓库满了（资源数量达到100个）的时候，生产者不能继续生产；消费者间隔2s消费一个资源，当仓库为空的时候，消费者不能继续消费；
> 4)消费者每次消费1个资源，首先打印出消耗之前仓库中的资源数量和空位的数量，然后打印出消耗之后仓库中的资源数量和空位的数量，并打印出所消耗的资源内容；
> 5)生产者每次生产1个资源，先打印出生产之前仓库中的资源数量和空位的数量，然后打印出生产之后仓库中的资源数量和空位的数量，并打印出所生产的资源内容。
> 6)消费者消费资源后需要把已经消费的资源从仓库里删除；
> 7)生产者生产资源时需要对仓库加上写入锁；消费者消费资源时根据需要对仓库添加读取或者写入锁；
> 8)用信号量实现进程的同步和互斥。
> ```

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

*

**

*

*

*

*

*

*

**

*

*

*

*

*

*

**

*

*

*

*

*

*

**

*

*

*

*

*

*

**

*

*

*

*

*

*

*

---

### 实验讲解

